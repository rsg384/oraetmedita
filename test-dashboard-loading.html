<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Carregamento - Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #101223;
            color: #f5f6fa;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #2a2d3e;
            border-radius: 8px;
        }
        .success { color: #7ee787; }
        .error { color: #ef4444; }
        .warning { color: #f59e0b; }
        .info { color: #3b82f6; }
        button {
            background: #7ee787;
            color: #101223;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #6ee677;
        }
        pre {
            background: #23243a;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª Teste de Carregamento do Dashboard</h1>
    
    <div class="test-section">
        <h2>ğŸ“¦ Carregamento de Dados</h2>
        <button onclick="loadBackupData()">Carregar Dados do Backup</button>
        <button onclick="checkLocalStorage()">Verificar localStorage</button>
        <button onclick="testSessionManager()">Testar SessionManager</button>
        <button onclick="testLogin()">Testar Login AutomÃ¡tico</button>
    </div>
    
    <div class="test-section">
        <h2>ğŸ“Š Resultados</h2>
        <div id="results"></div>
    </div>
    
    <script src="session-manager.js"></script>
    <script>
        let sessionManager;
        
        // Inicializar SessionManager
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ Inicializando teste...');
            sessionManager = new SessionManager();
            window.sessionManager = sessionManager;
        });
        
        // FunÃ§Ã£o para carregar dados do backup
        async function loadBackupData() {
            try {
                console.log('ğŸ“¦ Carregando dados do backup...');
                
                const backupData = {
                    "users": [
                        {
                            "id": "user_1753519273275_vo9clmtxv",
                            "name": "Rodrigo Silva Goes",
                            "email": "rodrigo@exemplo.com",
                            "userNumber": 1,
                            "createdAt": "2025-07-26T08:00:00.000Z",
                            "lastLogin": "2025-07-26T08:00:00.000Z",
                            "preferences": {
                                "theme": "dark",
                                "notifications": true,
                                "language": "pt-BR"
                            },
                            "stats": {
                                "consecutiveDays": 5,
                                "completedMeditations": 12,
                                "totalTime": "2h 30min",
                                "totalMeditations": 15,
                                "inProgressMeditations": 3
                            }
                        }
                    ],
                    "meditations": [
                        {
                            "id": "1",
                            "title": "PrincÃ­pios da Vida Sobrenatural",
                            "category": "vida-sobrenatural",
                            "duration": 12,
                            "scriptureReference": "JoÃ£o 15:1-8",
                            "scriptureText": "Eu sou a videira verdadeira, e meu Pai Ã© o agricultor...",
                            "icon": "ğŸ“–",
                            "lectio": "Neste texto, Jesus se apresenta como a videira verdadeira...",
                            "meditatio": "Reflita sobre o que significa 'permanecer em Cristo'...",
                            "oratio": "Senhor Jesus, videira verdadeira, eu quero permanecer em ti...",
                            "contemplatio": "PermaneÃ§a em silÃªncio na presenÃ§a de Jesus...",
                            "createdAt": "2024-01-15T10:00:00.000Z",
                            "updatedAt": "2024-01-15T10:00:00.000Z"
                        },
                        {
                            "id": "2",
                            "title": "A Humildade de Maria",
                            "category": "mariologia",
                            "duration": 15,
                            "scriptureReference": "Lucas 1:26-38",
                            "scriptureText": "No sexto mÃªs, o anjo Gabriel foi enviado...",
                            "icon": "ğŸ’",
                            "lectio": "Maria recebe a visita do anjo Gabriel...",
                            "meditatio": "Como vocÃª reage quando Deus te chama...",
                            "oratio": "Maria, MÃ£e de Deus, ensina-me a humildade...",
                            "contemplatio": "Contemple Maria em sua humildade...",
                            "createdAt": "2024-01-16T14:30:00.000Z",
                            "updatedAt": "2024-01-16T14:30:00.000Z"
                        },
                        {
                            "id": "3",
                            "title": "A OraÃ§Ã£o do Pai Nosso",
                            "category": "oracao",
                            "duration": 18,
                            "scriptureReference": "Mateus 6:9-13",
                            "scriptureText": "VÃ³s, pois, orai assim: Pai nosso...",
                            "icon": "ğŸ™",
                            "lectio": "Jesus nos ensina a orar com o Pai Nosso...",
                            "meditatio": "O que significa para vocÃª chamar Deus de 'Pai'...",
                            "oratio": "Pai nosso que estÃ¡s nos cÃ©us...",
                            "contemplatio": "PermaneÃ§a em silÃªncio...",
                            "createdAt": "2024-01-17T09:15:00.000Z",
                            "updatedAt": "2024-01-17T09:15:00.000Z"
                        }
                    ],
                    "categories": [
                        {
                            "id": "vida-sobrenatural",
                            "name": "Vida Sobrenatural",
                            "description": "MeditaÃ§Ãµes sobre a vida espiritual e a graÃ§a de Deus",
                            "icon": "ğŸ“–",
                            "color": "#8B5CF6",
                            "meditationCount": 1
                        },
                        {
                            "id": "mariologia",
                            "name": "Mariologia",
                            "description": "MeditaÃ§Ãµes sobre Nossa Senhora e sua devoÃ§Ã£o",
                            "icon": "ğŸ’",
                            "color": "#EC4899",
                            "meditationCount": 1
                        },
                        {
                            "id": "oracao",
                            "name": "OraÃ§Ã£o",
                            "description": "MeditaÃ§Ãµes sobre a vida de oraÃ§Ã£o e intimidade com Deus",
                            "icon": "ğŸ™",
                            "color": "#3B82F6",
                            "meditationCount": 1
                        }
                    ]
                };
                
                // Salvar dados no localStorage
                localStorage.setItem('users', JSON.stringify(backupData.users));
                localStorage.setItem('meditations', JSON.stringify(backupData.meditations));
                localStorage.setItem('categories', JSON.stringify(backupData.categories));
                
                addResult('âœ… Dados do backup carregados com sucesso', 'success');
                addResult(`ğŸ‘¥ UsuÃ¡rios: ${backupData.users.length}`, 'info');
                addResult(`ğŸ“– MeditaÃ§Ãµes: ${backupData.meditations.length}`, 'info');
                addResult(`ğŸ“‚ Categorias: ${backupData.categories.length}`, 'info');
                
            } catch (error) {
                addResult(`âŒ Erro ao carregar dados do backup: ${error.message}`, 'error');
            }
        }
        
        // FunÃ§Ã£o para verificar localStorage
        function checkLocalStorage() {
            try {
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                const meditations = JSON.parse(localStorage.getItem('meditations') || '[]');
                const categories = JSON.parse(localStorage.getItem('categories') || '[]');
                
                addResult('ğŸ“Š Dados no localStorage:', 'info');
                addResult(`ğŸ‘¥ UsuÃ¡rios: ${users.length}`, 'info');
                addResult(`ğŸ“– MeditaÃ§Ãµes: ${meditations.length}`, 'info');
                addResult(`ğŸ“‚ Categorias: ${categories.length}`, 'info');
                
                if (users.length > 0) {
                    addResult(`ğŸ‘¤ Primeiro usuÃ¡rio: ${users[0].name} (${users[0].email})`, 'success');
                }
                
            } catch (error) {
                addResult(`âŒ Erro ao verificar localStorage: ${error.message}`, 'error');
            }
        }
        
        // FunÃ§Ã£o para testar SessionManager
        async function testSessionManager() {
            try {
                if (!sessionManager) {
                    addResult('âŒ SessionManager nÃ£o inicializado', 'error');
                    return;
                }
                
                addResult('âœ… SessionManager inicializado', 'success');
                addResult(`ğŸ†” ID da sessÃ£o: ${sessionManager.currentSessionId}`, 'info');
                
                const isLoggedIn = sessionManager.isLoggedIn();
                addResult(`ğŸ” UsuÃ¡rio logado: ${isLoggedIn ? 'Sim' : 'NÃ£o'}`, isLoggedIn ? 'success' : 'warning');
                
                if (isLoggedIn) {
                    const currentUser = sessionManager.getCurrentUser();
                    addResult(`ğŸ‘¤ UsuÃ¡rio atual: ${currentUser.name}`, 'success');
                }
                
            } catch (error) {
                addResult(`âŒ Erro ao testar SessionManager: ${error.message}`, 'error');
            }
        }
        
        // FunÃ§Ã£o para testar login automÃ¡tico
        async function testLogin() {
            try {
                if (!sessionManager) {
                    addResult('âŒ SessionManager nÃ£o inicializado', 'error');
                    return;
                }
                
                addResult('ğŸ” Testando login automÃ¡tico...', 'info');
                
                const loginResult = await sessionManager.loginUser({
                    email: 'rodrigo@exemplo.com'
                });
                
                if (loginResult) {
                    addResult(`âœ… Login realizado com sucesso: ${loginResult.name}`, 'success');
                    addResult(`ğŸ“Š EstatÃ­sticas: ${loginResult.stats.consecutiveDays} dias, ${loginResult.stats.completedMeditations} meditaÃ§Ãµes`, 'info');
                } else {
                    addResult('âŒ Falha no login', 'error');
                }
                
            } catch (error) {
                addResult(`âŒ Erro no login: ${error.message}`, 'error');
            }
        }
        
        // FunÃ§Ã£o para adicionar resultados
        function addResult(message, type) {
            const resultsDiv = document.getElementById('results');
            const resultElement = document.createElement('div');
            resultElement.className = type;
            resultElement.textContent = message;
            resultsDiv.appendChild(resultElement);
            console.log(message);
        }
        
        // Limpar resultados
        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }
    </script>
</body>
</html> 